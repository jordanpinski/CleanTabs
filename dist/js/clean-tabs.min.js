"use strict";document.addEventListener("DOMContentLoaded",function(e){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})});
"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var CleanTabs=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;_classCallCheck(this,n),this.cleanTabs=e,this.cleanTabs.length<=0||(this.options=_objectSpread(_objectSpread({},{_name:"CleanTabs",_version:"1.0.1",openFirst:null,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}),t),this.init())}return _createClass(n,[{key:"init",value:function(){this.addGuids(),this.buildMobile(),this.bindEvents(),this.openFirst()}},{key:"openFirst",value:function(e){var o=this,a=0<arguments.length&&void 0!==e?e:0;this.cleanTabs.forEach(function(e){o.options.openFirst&&(a=o.options.openFirst);var t,n=o.getDataOptions(e);n&&(t=e.querySelectorAll("[data-button]").length-1,"openFirst"in n&&(a=n.openFirst<=t?n.openFirst:a));e={button:e.querySelector('[data-button][data-guid="'.concat(a,'"]')),content:e.querySelector('[data-content][data-guid="'.concat(a,'"]')),guid:a};o.open(e)})}},{key:"bindEvents",value:function(){var t=this;this.cleanTabs.forEach(function(e){e.addEventListener("click",function(e){t.handleTabClick(e)})})}},{key:"handleTabClick",value:function(e){var t,n;e.preventDefault(),e.target.closest("[data-button]")&&(e=""!==(n=(t=e.target.closest("[data-button]")).querySelector("a")).hash&&n.hash,n=t.dataset.guid,n={button:t,content:e?document.querySelector(e):document.querySelector('[data-tab-group] [data-content][data-guid="'.concat(n,'"]')),guid:n},this.open(n))}},{key:"open",value:function(e){var t=e.button,n=e.content,o=e.guid;this.options.beforeOpen(),this.closeAll(e),0<=o&&(o=t.closest("[data-tab-group]").dataset.guid,e=document.querySelector('[data-accordion-group][data-guid="'.concat(o,'"]')).querySelector('[data-accordion][data-guid="'.concat(e.guid,'"]')),window.cleanAccordion.open(e)),t.classList.add("open"),n.classList.add("open"),this.options.afterOpen()}},{key:"close",value:function(e){var t=e.button,e=e.content;this.options.beforeClose(),t.classList.remove("open"),e.classList.remove("open"),this.options.afterClose()}},{key:"closeAll",value:function(e){for(var e=e.button.closest("[data-tab-group"),t=e.querySelectorAll("[data-button]"),n=e.querySelectorAll("[data-content]"),o=0;o<t.length;o++){var a={button:t[o],content:n[o]};this.close(a)}}},{key:"buildMobile",value:function(){var u=this;this.cleanTabs.forEach(function(e){var t=e.dataset.guid,n=e.querySelectorAll("[data-button] a"),o=e.querySelectorAll("[data-content]"),a=document.createElement("div");a.dataset.accordionTabGroup="",a.dataset.accordionGroup="",a.dataset.guid=t;for(var i=0;i<n.length;i++){var r=n[i],c=o[i],s=document.createElement("div");s.dataset.accordion="",s.dataset.guid=[i];var l=document.createElement("div");l.dataset.control="",l.innerText=r.innerText;r=document.createElement("div");r.dataset.content="",r.innerHTML=c.innerHTML,s.appendChild(l),s.appendChild(r),a.appendChild(s)}e.parentNode.insertBefore(a,e.nextSibling),u.initializeCleanAccordion(e,[a])})}},{key:"initializeCleanAccordion",value:function(e,t){var o=this,t=new CleanAccordion(t,{afterOpen:function(e){var t=e.closest("[data-accordion-group]"),n=document.querySelector('[data-tab-group][data-guid="'.concat(t.dataset.guid,'"]')),t=parseInt(e.dataset.guid),e=n.querySelector('[data-button][data-guid="'.concat(t,'"]')),t=n.querySelector('[data-content][data-guid="'.concat(t,'"]'));o.open({button:e,content:t})}});window.cleanAccordion=t}},{key:"addGuids",value:function(){this.cleanTabs.forEach(function(e,t){e.dataset.guid=t,e.querySelectorAll("[data-button]").forEach(function(e,t){e.dataset.guid=t}),e.querySelectorAll(["[data-content]"]).forEach(function(e,t){e.dataset.guid=t})})}},{key:"getDataOptions",value:function(e){if(e.hasAttribute("data-options"))return JSON.parse(e.dataset.options)}}]),n}(),CleanAccordion=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.cleanAccordionGroups=e,this.cleanAccordionGroups.length<=0||(this.options=_objectSpread(_objectSpread({},{_name:"CleanAccordion",_version:"1.0.0",singleOpen:!0,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}),t),this.handleResize=this.debounce(this.handleResize.bind(this),100),this.init())}return _createClass(n,[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;this.cleanAccordionGroups.forEach(function(e){e.addEventListener("click",function(e){t.handleAccordionClick(e)})}),window.addEventListener("resize",function(){t.handleResize()})}},{key:"handleAccordionClick",value:function(e){var t=e.target,e=t.parentNode;t.hasAttribute("data-control")&&this.openClose(e)}},{key:"handleResize",value:function(){var t=this;this.cleanAccordionGroups.forEach(function(e){e.querySelectorAll("[data-content]").forEach(function(e){t.calculateContentHeight(e)})})}},{key:"openClose",value:function(e){e.classList.contains("open")?this.close(e):this.open(e)}},{key:"calculateContentHeight",value:function(e){e.parentNode.classList.contains("open")&&(e.style.maxHeight="".concat(e.scrollHeight,"px"))}},{key:"getComputedHeight",value:function(e){var t=e.scrollHeight,e=window.getComputedStyle(e);return t+parseInt(e.marginTop.replace("px",""))+parseInt(e.marginBottom.replace("px",""))}},{key:"resetContentHeight",value:function(e){e.style.maxHeight=""}},{key:"open",value:function(e){this.options.beforeOpen(e),this.closeAll(e);var t=e.querySelector("[data-content]");e.classList.add("open"),this.calculateContentHeight(t),this.options.afterOpen(e)}},{key:"close",value:function(e){this.options.beforeClose(e);var t=e.querySelector("[data-content]");e.classList.remove("open"),this.resetContentHeight(t),this.options.afterClose(e)}},{key:"closeAll",value:function(e){var t=this,n=e.parentNode,e=this.getDataOptions(n);if("singleOpen"in e){if(!1===e.singleOpen)return}else if(!this.options.singleOpen)return;n.querySelectorAll("[data-accordion]").forEach(function(e){t.close(e)})}},{key:"getDataOptions",value:function(e){var t={};return e.hasAttribute("data-options")&&(t=JSON.parse(e.dataset.options)),t}},{key:"debounce",value:function(o,a,i){var r;return function(){var e=this,t=arguments,n=i&&!r;clearTimeout(r),r=setTimeout(function(){r=null,i||o.apply(e,t)},a),n&&o.apply(e,t)}}}]),n}();
//# sourceMappingURL=clean-tabs.min.js.map
